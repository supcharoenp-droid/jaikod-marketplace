/**
 * INTELLIGENCE OUTPUT SCHEMA
 * 
 * Output schema for Layer 2 Intelligence Analysis
 * This is the FINAL output of the AI Pipeline
 */

// ============================================
// MAIN SCHEMA
// ============================================
export interface IntelligenceOutput {
    // === Category ===
    suggestedCategory: CategorySuggestion

    // === Pricing ===
    priceRange: PriceRange

    // === Content ===
    suggestedTitle: {
        th: string
        en: string
    }
    suggestedDescription: string

    // === Risk Assessment ===
    riskAssessment: RiskAssessment

    // === Overall ===
    overallConfidence: number        // 0-1 combined confidence
    processingNotes: string[]        // Notes from AI

    // === Meta ===
    modelUsed?: string               // Which model was used
    visionConfidence?: number        // Confidence from Layer 1
}

// ============================================
// SUB-SCHEMAS
// ============================================
export interface CategorySuggestion {
    id: number                       // Main category ID (1-16, 99)
    name_th: string                  // Category name in Thai
    subcategoryId?: number           // Subcategory ID if applicable
    subcategoryName?: string         // Subcategory name
    confidence: number               // 0-1
}

export interface PriceRange {
    min: number                      // Lowest reasonable price
    suggested: number                // Recommended price
    max: number                      // Highest reasonable price
    currency: 'THB'
    reasoning: string[]              // Why this price range
    confidence: number               // 0-1
}

export interface RiskAssessment {
    level: 'low' | 'medium' | 'high' | 'blocked'
    flags: string[]                  // Risk flags
    contentWarnings: string[]        // Content issues
}

// ============================================
// VALIDATION HELPERS
// ============================================
export function isValidIntelligenceOutput(obj: unknown): obj is IntelligenceOutput {
    if (!obj || typeof obj !== 'object') return false

    const output = obj as Record<string, unknown>

    // Required fields
    if (!output.suggestedCategory || !output.priceRange) return false

    return true
}

export function createEmptyIntelligenceOutput(): IntelligenceOutput {
    return {
        suggestedCategory: {
            id: 99,
            name_th: 'อื่นๆ',
            confidence: 0,
        },
        priceRange: {
            min: 0,
            suggested: 0,
            max: 0,
            currency: 'THB',
            reasoning: [],
            confidence: 0,
        },
        suggestedTitle: {
            th: '',
            en: '',
        },
        suggestedDescription: '',
        riskAssessment: {
            level: 'medium',
            flags: [],
            contentWarnings: [],
        },
        overallConfidence: 0,
        processingNotes: [],
    }
}

// ============================================
// CATEGORY ID MAPPING
// ============================================
export const CATEGORY_MAP: Record<number, string> = {
    1: 'ยานยนต์',
    2: 'อสังหาริมทรัพย์',
    3: 'มือถือและแท็บเล็ต',
    4: 'คอมพิวเตอร์',
    5: 'เครื่องใช้ไฟฟ้า',
    6: 'แฟชั่น',
    7: 'เกมและแก็ดเจ็ต',
    8: 'กล้องถ่ายรูป',
    9: 'พระเครื่อง',
    10: 'สัตว์เลี้ยง',
    11: 'บริการ',
    12: 'กีฬาและท่องเที่ยว',
    13: 'บ้านและสวน',
    14: 'เครื่องสำอาง',
    15: 'เด็กและทารก',
    16: 'หนังสือ',
    17: 'อาหารและเครื่องดื่ม',
    18: 'สุขภาพและอาหารเสริม',
    19: 'เครื่องดนตรี',
    20: 'งานและฟรีแลนซ์',
    21: 'ตั๋วและบัตรกำนัล',
    99: 'อื่นๆ',
}

export const SUBCATEGORY_MAP: Record<number, string> = {
    // Automotive (1xx)
    101: 'รถยนต์มือสอง',
    102: 'มอเตอร์ไซค์',
    103: 'อะไหล่รถยนต์',
    104: 'อะไหล่มอเตอร์ไซค์',
    105: 'รถบรรทุก',
    106: 'ล้อและยาง',
    107: 'รถกระบะ',
    108: 'รถตู้',
    109: 'อุปกรณ์บำรุงรักษารถ',
    110: 'รถไฟฟ้า/EV',
    111: 'รถคลาสสิก',
    112: 'เรือ/เจ็ทสกี',
    113: 'รถ ATV',
    114: 'GPS/กล้องติดรถ',

    // Real Estate (2xx)
    201: 'บ้านเดี่ยว',
    202: 'คอนโด',
    203: 'ที่ดิน',
    204: 'ทาวน์เฮ้าส์',
    205: 'อาคารพาณิชย์',
    206: 'หอพัก/ห้องเช่า',
    207: 'โกดัง/โรงงาน',
    208: 'พื้นที่สำนักงาน',

    // Mobile (3xx)
    301: 'โทรศัพท์มือถือ',
    302: 'แท็บเล็ต',
    303: 'อุปกรณ์สวมใส่',
    304: 'อุปกรณ์เสริมมือถือ',
    305: 'อะไหล่มือถือ',
    306: 'ฟิล์ม/เคส',
    307: 'แบตสำรอง',

    // Computers (4xx)
    401: 'โน้ตบุ๊ค',
    402: 'คอมพิวเตอร์ตั้งโต๊ะ',
    403: 'จอคอมพิวเตอร์',
    404: 'อุปกรณ์เสริม',
    405: 'ปริ้นเตอร์',
    406: 'Components',
    407: 'Gaming PC',
    408: 'คีย์บอร์ด',
    409: 'เมาส์',
    410: 'ชิ้นส่วน PC',

    // Appliances (5xx)
    501: 'แอร์',
    502: 'ตู้เย็น',
    503: 'เครื่องซักผ้า',
    504: 'ทีวี',
    505: 'เครื่องใช้ไฟฟ้าในครัว',
    506: 'เครื่องทำน้ำอุ่น',
    507: 'เครื่องดูดฝุ่น',
    508: 'พัดลม',
    509: 'เครื่องฟอกอากาศ',
    510: 'เครื่องรีดผ้า',
    511: 'เครื่องทำน้ำดื่ม',

    // Fashion (6xx)
    601: 'เสื้อผ้าผู้ชาย',
    602: 'เสื้อผ้าผู้หญิง',
    603: 'กระเป๋าแบรนด์เนม',
    604: 'รองเท้า/Sneakers',
    605: 'นาฬิกาข้อมือ',
    606: 'เครื่องประดับ',
    607: 'แฟชั่นอุปกรณ์เสริม',
    608: 'เสื้อผ้าเด็ก',
    609: 'แบรนด์เนม/Luxury',
    610: 'เสื้อผ้า Vintage',
    611: 'เสื้อผ้าไซส์ใหญ่',
    612: 'ชุดกีฬา',
    613: 'ชุดไทย',
    614: 'แว่นตา',
    615: 'เข็มขัด',
    616: 'หมวก/ผ้าพันคอ',

    // Gaming (7xx)
    701: 'เครื่องเกมคอนโซล',
    702: 'แผ่นเกม',
    703: 'เกมมิ่งเกียร์',
    704: 'หูฟังเกมมิ่ง',
    705: 'คีย์บอร์ดเกมมิ่ง',
    706: 'โดรน',
    707: 'VR Headset',
    708: 'เกมย้อนยุค',
    709: 'ไอดีเกม',
    710: 'อุปกรณ์สตรีมมิ่ง',
    711: 'การ์ดสะสม',
    712: 'สมาร์ทโฮม',

    // Cameras (8xx)
    801: 'กล้องดิจิตอล',
    802: 'กล้องฟิล์ม',
    803: 'เลนส์',
    804: 'อุปกรณ์สตูดิโอ',
    805: 'กล้อง Action',
    806: 'กล้องวิดีโอ',
    807: 'ขาตั้งกล้อง/Gimbal',
    808: 'อุปกรณ์เสริมกล้อง',
    809: 'กล้องโพลารอยด์',

    // Amulets (9xx)
    901: 'พระเครื่อง',
    902: 'เหรียญกษาปณ์',
    903: 'ธนบัตรเก่า',
    904: 'ของเก่า/โบราณ',
    905: 'Art Toy',

    // Pets (10xx)
    1001: 'สุนัข',
    1002: 'แมว',
    1003: 'สัตว์เลี้ยงอื่นๆ',
    1004: 'อุปกรณ์สัตว์เลี้ยง',
    1005: 'อาหารสัตว์',

    // Services (11xx)
    1101: 'บริการช่าง',
    1102: 'บริการขนย้าย',
    1103: 'แม่บ้าน',
    1104: 'รับจ้างทั่วไป',
    1105: 'ติวเตอร์',
    1106: 'บริการ IT',
    1107: 'ออกแบบกราฟิก',
    1108: 'ถ่ายภาพ',
    1109: 'จัดงานอีเวนท์',
    1110: 'บริการกฎหมาย',
    1111: 'บริการบัญชี',
    1112: 'รับเหมาก่อสร้าง',

    // Sports (12xx)
    1201: 'จักรยาน',
    1202: 'เครื่องออกกำลังกาย',
    1203: 'อุปกรณ์แคมป์ปิ้ง',
    1204: 'อุปกรณ์กีฬา',
    1205: 'บัตรท่องเที่ยว',
    1206: 'สเก็ต/โรลเลอร์',

    // Home & Garden (13xx)
    1301: 'เฟอร์นิเจอร์',
    1302: 'ของตกแต่งบ้าน',
    1303: 'ต้นไม้/ทำสวน',
    1304: 'เครื่องมือช่าง',
    1305: 'อุปกรณ์สวน',

    // Beauty (14xx)
    1401: 'เครื่องสำอาง',
    1402: 'ผลิตภัณฑ์ดูแลผิว',
    1403: 'ผลิตภัณฑ์ดูแลผม',
    1404: 'น้ำหอม',
    1405: 'ผลิตภัณฑ์บำรุงร่างกาย',
    1406: 'อุปกรณ์ความงาม',

    // Baby & Kids (15xx)
    1501: 'เสื้อผ้าเด็ก',
    1502: 'รองเท้าเด็ก',
    1503: 'ของเล่นเด็ก',
    1504: 'อุปกรณ์เด็กอ่อน',
    1505: 'ผลิตภัณฑ์ดูแลเด็ก',
    1506: 'เฟอร์นิเจอร์เด็ก',

    // Books (16xx)
    1601: 'หนังสือทั่วไป',
    1602: 'หนังสือการ์ตูน',
    1603: 'นิตยสาร',
    1604: 'หนังสือเรียน',
    1605: 'คอร์สออนไลน์',
    1606: 'เครื่องเขียน',

    // Food & Beverages (17xx) - NEW
    1701: 'อาหารสด',
    1702: 'อาหารแห้ง',
    1703: 'ขนมและเบเกอรี่',
    1704: 'เครื่องดื่ม',
    1705: 'กาแฟและชา',
    1706: 'อาหารเพื่อสุขภาพ',
    1707: 'วัตถุดิบทำอาหาร',
    1708: 'อาหารนำเข้า',

    // Health & Supplements (18xx) - NEW
    1801: 'วิตามินและอาหารเสริม',
    1802: 'อาหารเสริมกีฬา',
    1803: 'ผลิตภัณฑ์ลดน้ำหนัก',
    1804: 'อุปกรณ์การแพทย์',
    1805: 'สมุนไพร',
    1806: 'ดูแลช่องปาก',
    1807: 'ดูแลสายตา',
    1808: 'สินค้าผู้สูงอายุ',

    // Musical Instruments (19xx) - NEW
    1901: 'กีตาร์',
    1902: 'เปียโน/คีย์บอร์ด',
    1903: 'กลอง',
    1904: 'เครื่องเป่า',
    1905: 'เครื่องสาย',
    1906: 'อุปกรณ์ DJ',
    1907: 'แอมป์',
    1908: 'อุปกรณ์เสริมดนตรี',

    // Jobs & Freelance (20xx) - NEW
    2001: 'งาน Full-time',
    2002: 'งาน Part-time',
    2003: 'งานฟรีแลนซ์',
    2004: 'รับสมัครพนักงาน',
    2005: 'ธุรกิจ/แฟรนไชส์',
    2006: 'ขายกิจการ',

    // Tickets & Vouchers (21xx) - NEW
    2101: 'บัตรคอนเสิร์ต',
    2102: 'บัตรกีฬา',
    2103: 'บัตรของขวัญ',
    2104: 'คูปองร้านอาหาร',
    2105: 'บัตรสปา',
    2106: 'ตั๋วเครื่องบิน',
    2107: 'บัตรสวนสนุก',

    // Others (99xx)
    9901: 'ของใช้ทั่วไป',
    9902: 'สินค้าแฮนด์เมด',
    9903: 'DIY',
    9904: 'ของรีไซเคิล',
    9905: 'เครื่องมือสำนักงาน',
}

